# Basphere λ΅λ“λ§µ

## κ°μ”

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                              Project Basphere                                β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                             β”‚
β”‚  Stage 1 (MVP) β… μ™„λ£                                                       β”‚
β”‚  β”β”€β”€ CLI κΈ°λ° VM μ…€ν”„μ„λΉ„μ¤                                                   β”‚
β”‚  β”β”€β”€ μ›Ή κΈ°λ° μ‚¬μ©μ λ“±λ΅                                                      β”‚
β”‚  β””β”€β”€ κ΄€λ¦¬μ CLI                                                              β”‚
β”‚                                                                             β”‚
β”‚  Stage 2 (μμ •)                                                              β”‚
β”‚  β”β”€β”€ Kubernetes ν΄λ¬μ¤ν„° ν”„λ΅λΉ„μ €λ‹ (Cluster API)                             β”‚
β”‚  β””β”€β”€ ν…λ„νΈ λ„¤νΈμ›ν¬ κ²©λ¦¬                                                     β”‚
β”‚                                                                             β”‚
β”‚  Stage 3 (IDP)                                                               β”‚
β”‚  β”β”€β”€ Backstage κΈ°λ° ν¬ν„Έ                                                     β”‚
β”‚  β”β”€β”€ Crossplane μΈν”„λΌ μ μ–΄                                                  β”‚
β”‚  β”β”€β”€ GitOps (ArgoCD/Flux)                                                   β”‚
β”‚  β””β”€β”€ Harbor, CI/CD ν†µν•©                                                     β”‚
β”‚                                                                             β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## Stage 1: MVP (CLI κΈ°λ° VM μ…€ν”„μ„λΉ„μ¤)

**μƒνƒ**: β… μ™„λ£ (2026-01-19)

### μ™„λ£λ κΈ°λ¥

- [x] μ‚¬μ©μ κ΄€λ¦¬ (μƒμ„±/μ‚­μ )
- [x] μ›Ή κΈ°λ° μ‚¬μ©μ λ“±λ΅ μ”μ²­
- [x] κ΄€λ¦¬μ μΉμΈ/κ±°λ¶€ (CLI)
- [x] VM μƒμ„±/μ΅°ν/μ‚­μ 
- [x] IP μλ™ ν• λ‹Ή (IPAM)
- [x] MTU μ„¤μ • μ§€μ›
- [x] μμ΅΄μ„± μλ™ μ„¤μΉ
- [x] λ‹¤μ¤‘ OS μ§€μ› (Ubuntu 24.04, Rocky Linux 10.1)
- [x] OSλ³„ λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤ μλ™ μ„¤μ •
- [x] λ””μ¤ν¬ μλ™ ν™•μ¥ (growpart)
- [x] 5λ‹¨κ³„ VM μ¤ν™ (tiny, small, medium, large, huge)
- [x] API κΈ°λ° VM κ΄€λ¦¬ - CLI β†’ API β†’ Terraform μ•„ν‚¤ν…μ²
- [x] vSphere μΈμ¦ μ •λ³΄ λ³΄νΈ - vsphere.env 600 κ¶ν•
- [x] nginx λ¦¬λ²„μ¤ ν”„λ΅μ‹ - λ‚΄λ¶€ API μ™Έλ¶€ μ°¨λ‹¨
- [x] Google reCAPTCHA v2 - λ“±λ΅ νΌ λ΄‡ λ°©μ§€
- [x] SSH ν‚¤ λ³€κ²½ μ”μ²­ - μ›Ή νΌ + κ΄€λ¦¬μ μΉμΈ μ›ν¬ν”λ΅μ°
- [x] μ΄λ©”μΌ λ„λ©”μΈ κ²€μ¦ - ν—μ©λ λ„λ©”μΈλ§ λ“±λ΅ κ°€λ¥
- [x] SSH λ³΄μ• κ°•ν™” - λΉ„λ°€λ²νΈ μΈμ¦ λΉ„ν™μ„±ν™”, fail2ban
- [x] μ™Έλ¶€ μ ‘κ·Ό μ§€μ› - bastion μ£Όμ†/ν¬νΈ μ„¤μ • κ°€λ¥

### VM μ¤ν™

| μ¤ν™ | vCPU | RAM | Disk | μ©λ„ |
|------|------|-----|------|------|
| tiny | 2 | 4GB | 50GB | ν…μ¤νΈμ© |
| small | 2 | 8GB | 50GB | κ°λ°μ© |
| medium | 4 | 16GB | 100GB | μΌλ° μ›ν¬λ΅λ“ |
| large | 8 | 32GB | 200GB | κ³ μ„±λ¥ μ›ν¬λ΅λ“ |
| huge | 16 | 64GB | 200GB | λ€κ·λ¨ μ›ν¬λ΅λ“ |

### μ§€μ› OS

| OS | ν…ν”λ¦Ώ | μΈν„°νμ΄μ¤ |
|----|--------|-----------|
| Ubuntu 24.04 LTS | ubuntu-noble-24.04-cloudimg | ens192 |
| Rocky Linux 10.1 | rocky-10-template | ens33 |

### μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”     SSH      β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”                 β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Developer  β”‚β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–¶β”‚   Bastion   β”‚                 β”‚   vSphere   β”‚
β”‚             β”‚              β”‚             β”‚                 β”‚  (vCenter)  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”              β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”                 β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚                           β”‚                                β–²
       β”‚      HTTP (λ“±λ΅ νΌ)        β”‚                                β”‚
       β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤                                β”‚
                                   β–Ό                                β”‚
                            β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    Terraform    β”€β”€β”€β”€β”€β”€β”€β”€β”
                            β”‚  API Server β”‚
                            β”‚  (Go/chi)   β”‚
                            β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## Stage 2: Kubernetes ν΄λ¬μ¤ν„° ν”„λ΅λΉ„μ €λ‹

**μƒνƒ**: π§ μμ •

### λ©ν‘

- [ ] Kubernetes ν΄λ¬μ¤ν„° μ…€ν”„μ„λΉ„μ¤ μƒμ„±
- [ ] ν…λ„νΈ λ„¤νΈμ›ν¬ κ²©λ¦¬

### κ³„νλ κΈ°λ¥

#### CLI λ…λ Ήμ–΄

```bash
create-cluster -n my-cluster -t development
list-clusters
delete-cluster my-cluster
```

#### ν΄λ¬μ¤ν„° νƒ€μ…

| νƒ€μ… | Control Plane | Worker | μ©λ„ |
|------|--------------|--------|------|
| development | 1λ€ | 3λ€ | κ°λ°/ν…μ¤νΈ |
| production | 3λ€ | 3λ€ | μ΄μ ν™κ²½ |

#### κΈ°μ  μ¤νƒ

| κµ¬μ„± μ”μ† | κΈ°μ  |
|----------|------|
| ν”„λ΅λΉ„μ €λ‹ | Cluster API (CAPV) |
| K8s μ΄λ―Έμ§€ | Talos Linux / Ubuntu |
| CNI | Cilium |
| CSI | VMware CSI, Synology NFS |

### μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚            Management Cluster               β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”          β”‚
β”‚  β”‚ Cluster API β”‚  β”‚    CAPV     β”‚          β”‚
β”‚  β”‚  Operator   β”‚  β”‚  (vSphere)  β”‚          β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”          β”‚
β”‚         β”‚                β”‚                  β”‚
β”‚         β””β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”                  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                   β”‚
                   β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚         Workload Clusters (User)            β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”          β”‚
β”‚  β”‚   Dev K8s   β”‚  β”‚  Prod K8s   β”‚          β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”          β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## Stage 3: IDP (Internal Developer Platform)

**μƒνƒ**: π“‹ κ³„ν

### λ©ν‘

- [ ] Backstage κΈ°λ° ν¬ν„Έ
- [ ] Crossplane μΈν”„λΌ μ μ–΄
- [ ] GitOps (ArgoCD/Flux)
- [ ] Harbor μ»¨ν…μ΄λ„ λ μ§€μ¤νΈλ¦¬
- [ ] CI/CD ν†µν•©

### κ³„νλ κΈ°λ¥

#### μ‚¬μ©μ μΈν„°νμ΄μ¤

- Backstage ν¬ν„Έ
- μ„λΉ„μ¤ μΉ΄νƒλ΅κ·Έ
- μ…€ν”„μ„λΉ„μ¤ μ›ν¬ν”λ΅μ°

#### μΈν”„λΌ μλ™ν™”

- CrossplaneμΌλ΅ vSphere λ¦¬μ†μ¤ κ΄€λ¦¬
- GitOps κΈ°λ° μ„ μ–Έμ  μΈν”„λΌ

#### κ°λ°μ κ²½ν—

- ν…ν”λ¦Ώ κΈ°λ° ν”„λ΅μ νΈ μƒμ„±
- ν†µν•© CI/CD νμ΄ν”„λΌμΈ
- ν†µν•© λ¨λ‹ν„°λ§/λ΅κΉ…

### κΈ°μ  μ¤νƒ

| κµ¬λ¶„ | κΈ°μ  |
|------|------|
| ν¬ν„Έ | Backstage |
| μΈν”„λΌ μ μ–΄ | Crossplane |
| K8s ν”„λ΅λΉ„μ €λ‹ | Cluster API |
| GitOps | ArgoCD / Flux |
| μ»¨ν…μ΄λ„ λ μ§€μ¤νΈλ¦¬ | Harbor |
| ν…λ„νΈ λΌμ°ν„° | OPNsense |
| VPN | WireGuard |
| λ°μ΄ν„°λ² μ΄μ¤ | PostgreSQL |

---

## κ΄€λ ¨ λ¬Έμ„

- [λΉ„μ „](vision.md) - ν”„λ΅μ νΈ λ©ν‘
- [μ•„ν‚¤ν…μ²](architecture.md) - μ „μ²΄ μ‹μ¤ν… μ•„ν‚¤ν…μ²
- [μ‚¬μ©μ μ‹λ‚λ¦¬μ¤](user-scenarios.md) - μ‚¬μ©μ μ›ν¬ν”λ΅μ°
- [μΈν”„λΌ](infrastructure.md) - ν•λ“μ›¨μ–΄ μ‚¬μ–‘
